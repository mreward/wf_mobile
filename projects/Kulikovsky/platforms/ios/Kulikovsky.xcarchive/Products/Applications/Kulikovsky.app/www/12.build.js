(window.webpackJsonpmWallet=window.webpackJsonpmWallet||[]).push([[12],{1226:function(e,t,r){"use strict";r.r(t);var i=r(1297),a=r(1244);for(var n in a)"default"!==n&&function(e){r.d(t,e,(function(){return a[e]}))}(n);var s=r(11),o=Object(s.a)(a.default,i.a,i.b,!1,null,null,null);t.default=o.exports},1244:function(e,t,r){"use strict";r.r(t);var i=r(1245),a=r.n(i);for(var n in i)"default"!==n&&function(e){r.d(t,e,(function(){return i[e]}))}(n);t.default=a.a},1245:function(e,t,r){"use strict";var i=r(6);r(1)(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r(1274)),n=i(r(531)),s={name:"screen-edit-profile",mixins:[a.default,n.default]};t.default=s},1274:function(e,t,r){"use strict";var i=r(6);r(1)(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r(1)),n=i(r(23)),s=i(r(24)),o=i(r(21)),u=i(r(22)),l=i(r(20)),c=i(r(28)),f=i(r(29)),d=i(r(18)),p=i(r(27)),h=r(33),y=i(r(530)),m=i(r(294)),v=i(r(527));function g(e,t){var r=(0,l.default)(e);if(u.default){var i=(0,u.default)(e);t&&(i=i.filter((function(t){return(0,o.default)(e,t).enumerable}))),r.push.apply(r,i)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(r,!0).forEach((function(t){(0,d.default)(e,t,r[t])})):s.default?(0,n.default)(e,(0,s.default)(r)):g(r).forEach((function(t){(0,a.default)(e,t,(0,o.default)(r,t))}))}return e}var P,b,k,w={components:{DynamicInput:y.default},data:function(){return{dynamicInput:{},errorMessages:{},selectedCountry:{code:""},allStartProfileData:{}}},computed:_({},(0,h.mapGetters)({settings:p.default.App.Getters.settings,profile:p.default.MrewardProfile.Getters.userProfile,countries:p.default.MrewardGeo.Getters.countries,profileFields:p.default.MrewardProfile.Getters.profileFields}),{nothingChanges:function(){var e=_({city:this.city.name},this.dynamicInput);return(0,v.default)(e,this.allStartProfileData)}}),created:(k=(0,f.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.profileFields.length){e.next=4;break}return e.next=4,this.getProfileParams();case 4:if(this.countries.length){e.next=7;break}return e.next=7,this.getCountries();case 7:this.profile.id_city&&this.setCityName(),this.addDynamicFieldsToData(),this.setCountry(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.$Alert.Error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return k.apply(this,arguments)}),methods:_({},(0,h.mapActions)({getProfileParams:p.default.MrewardProfile.Actions.getProfileParams,editProfileAction:p.default.MrewardProfile.Actions.editProfile,popToPage:p.default.App.Actions.popToPage,getCountries:p.default.MrewardGeo.Actions.getCountries,getCityById:p.default.MrewardGeo.Actions.getCityById}),{setCityName:(b=(0,f.default)(c.default.mark((function e(){var t,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getCityById({id:this.profile.id_city});case 3:t=e.sent,r=t.target.city_name,this.city.name=r,this.allStartProfileData.city=r,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.$Alert.Error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return b.apply(this,arguments)}),setCountry:function(){var e="+".concat(this.profile.mobile),t=m.default.GetCountryByPhoneNumber(e),r=this.countries.find((function(e){return e.code===t})),i=r.phone_code,a=r.country_id,n=r.country_name,s=r.code;this.selectedCountry={code:i,id:a,name:n,iso:s}},addDynamicFieldsToData:function(){var e=this;this.profileFields.length&&(this.profileFields.forEach((function(t){var r=t.key;e.$set(e.dynamicInput,r,""),e.profile.hasOwnProperty(r)&&(e.dynamicInput[r]=e.profile[r])})),this.allStartProfileData=_({},this.allStartProfileData,{},this.dynamicInput))},editProfile:(P=(0,f.default)(c.default.mark((function e(){var t,r,i,a=this;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.errorMessages={},t=_({},this.dynamicInput,{id_city:this.city.id,id_region:this.city.regionId}),e.next=5,this.editProfileAction(t);case 5:this.$bus.$emit("showStatusPopover",{status:1,title:this.$t("m_profile_edit_profile_success"),nextEvent:this.goToProfile}),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),r=e.t0.error.data,i=void 0===r?[]:r,e.t0.message,i.forEach((function(e){a.$set(a.errorMessages,e.field,e.message)}));case 14:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return P.apply(this,arguments)}),goToProfile:function(){this.popToPage("screen-home")}})};t.default=w},1297:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout",{attrs:{title:e.$t("m_profile_edit_profile")}},[r("div",{staticClass:"layout-auth__form"},[r("v-text-field",{attrs:{readonly:"",label:e.$t("m_auth_city","",{required:"*"}),"error-messages":e.errorMessages.id_city,type:"text"},on:{focus:e.goToSelectCity},model:{value:e.city.name,callback:function(t){e.$set(e.city,"name",t)},expression:"city.name"}}),e._v(" "),e.profileFields.length?e._l(e.profileFields,(function(t,i){return r("dynamic-input",{key:i,attrs:{field:t,"error-messages":e.errorMessages[t.key]},on:{hideError:function(){return e.errorMessages[t.key]=""}},model:{value:e.dynamicInput[t.key],callback:function(r){e.$set(e.dynamicInput,t.key,r)},expression:"dynamicInput[field.key]"}})})):e._e(),e._v(" "),r("v-btn",{staticClass:"margin-vertical--base",attrs:{depressed:"",color:"primary",type:"main",block:"",disabled:e.nothingChanges},on:{click:function(t){return t.preventDefault(),e.editProfile(t)}}},[e._v("\n            "+e._s(e.$t("m_profile_save"))+"\n        ")])],2)])},a=[];r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}))}}]);