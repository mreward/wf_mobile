(window.webpackJsonpmWallet=window.webpackJsonpmWallet||[]).push([[13],{1275:function(e,t,r){"use strict";r.r(t);var n=r(1368),a=r(1296);for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);var o=r(12),s=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);t.default=s.exports},1296:function(e,t,r){"use strict";r.r(t);var n=r(1297),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t.default=a.a},1297:function(e,t,r){"use strict";var n=r(6);r(1)(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1335)),i=n(r(556)),o={name:"screen-edit-profile",mixins:[a.default,i.default]};t.default=o},1335:function(e,t,r){"use strict";var n=r(6);r(1)(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),i=n(r(23)),o=n(r(24)),s=n(r(21)),u=n(r(22)),l=n(r(19)),c=n(r(28)),f=n(r(29)),d=n(r(17)),p=n(r(26)),y=r(34),m=n(r(555)),v=n(r(422)),h=n(r(551));function g(e,t){var r=(0,l.default)(e);if(u.default){var n=(0,u.default)(e);t&&(n=n.filter((function(t){return(0,s.default)(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):o.default?(0,i.default)(e,(0,o.default)(r)):g(Object(r)).forEach((function(t){(0,a.default)(e,t,(0,s.default)(r,t))}))}return e}var P={components:{DynamicInput:m.default},data:function(){return{dynamicInput:{},errorMessages:{},selectedCountry:{code:""},allStartProfileData:{}}},computed:_({},(0,y.mapGetters)({settings:p.default.App.Getters.settings,profile:p.default.MrewardProfile.Getters.userProfile,countries:p.default.MrewardGeo.Getters.countries,profileFields:p.default.MrewardProfile.Getters.profileFields}),{nothingChanges:function(){var e=_({city:this.city.name},this.dynamicInput);return(0,h.default)(e,this.allStartProfileData)},fields:function(){return this.profileFields.filter((function(e){return"birth_day"!==e.key}))}}),created:function(){var e=this;return(0,f.default)(c.default.mark((function t(){return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.profileFields.length){t.next=4;break}return t.next=4,e.getProfileParams();case 4:if(e.countries.length){t.next=7;break}return t.next=7,e.getCountries();case 7:e.profile.id_city&&e.setCityName(),e.addDynamicFieldsToData(),e.setCountry(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.$Alert.Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},methods:_({},(0,y.mapActions)({getProfileParams:p.default.MrewardProfile.Actions.getProfileParams,editProfileAction:p.default.MrewardProfile.Actions.editProfile,popToPage:p.default.App.Actions.popToPage,getCountries:p.default.MrewardGeo.Actions.getCountries,getCityById:p.default.MrewardGeo.Actions.getCityById}),{setCityName:function(){var e=this;return(0,f.default)(c.default.mark((function t(){var r,n;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getCityById({id:e.profile.id_city});case 3:r=t.sent,n=r.target.city_name,e.city.name=n,e.allStartProfileData.city=n,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.$Alert.Error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},setCountry:function(){var e="+".concat(this.profile.mobile),t=v.default.GetCountryByPhoneNumber(e),r=this.countries.find((function(e){return e.code===t})),n=r.phone_code,a=r.country_id,i=r.country_name,o=r.code;this.selectedCountry={code:n,id:a,name:i,iso:o}},addDynamicFieldsToData:function(){var e=this;this.profileFields.length&&(this.profileFields.forEach((function(t){var r=t.key;e.$set(e.dynamicInput,r,""),e.profile.hasOwnProperty(r)&&(e.dynamicInput[r]=e.profile[r])})),this.allStartProfileData=_({},this.allStartProfileData,{},this.dynamicInput))},editProfile:function(){var e=this;return(0,f.default)(c.default.mark((function t(){var r,n,a;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.errorMessages={},r=_({},e.dynamicInput,{id_city:e.city.id,id_region:e.city.regionId}),t.next=5,e.editProfileAction(r);case 5:e.$bus.$emit("showStatusPopover",{status:1,title:e.$t("m_profile_edit_profile_success"),nextEvent:e.goToProfile}),t.next=14;break;case 8:t.prev=8,t.t0=t.catch(0),n=t.t0.error.data,a=void 0===n?[]:n,t.t0.message,a.forEach((function(t){e.$set(e.errorMessages,t.field,t.message)}));case 14:case"end":return t.stop()}}),t,null,[[0,8]])})))()},goToProfile:function(){this.popToPage("screen-home")}})};t.default=P},1368:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout",{attrs:{title:e.$t("m_profile_edit_profile")}},[r("div",{staticClass:"layout-auth__form"},[r("v-text-field",{attrs:{readonly:"",label:e.$t("m_auth_city","",{required:"*"}),"error-messages":e.errorMessages.id_city,type:"text"},on:{focus:e.goToSelectCity},model:{value:e.city.name,callback:function(t){e.$set(e.city,"name",t)},expression:"city.name"}}),e._v(" "),e.fields.length?e._l(e.fields,(function(t,n){return r("dynamic-input",{key:n,attrs:{field:t,"error-messages":e.errorMessages[t.key]},on:{hideError:function(){return e.errorMessages[t.key]=""}},model:{value:e.dynamicInput[t.key],callback:function(r){e.$set(e.dynamicInput,t.key,r)},expression:"dynamicInput[field.key]"}})})):e._e(),e._v(" "),r("v-btn",{staticClass:"margin-vertical--base",attrs:{depressed:"",color:"primary",type:"main",block:"",disabled:e.nothingChanges},on:{click:function(t){return t.preventDefault(),e.editProfile(t)}}},[e._v("\n            "+e._s(e.$t("m_profile_save"))+"\n        ")])],2)])},a=[]}}]);