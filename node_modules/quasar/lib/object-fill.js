"use strict";

require("earlgrey-runtime/5");var $targ$12 = undefined;var util$0 = undefined;var identify$0 = undefined;var fork__minus__identify$0 = undefined;var tuck$0 = undefined;var next__minus__id$0 = undefined;var ID$0 = undefined;var methods$0 = undefined;var longest__minus__run$0 = undefined;var proxy$0 = undefined;var deprox$0 = undefined;var $targ$0 = undefined;var $targ$1 = undefined;var object__minus__clobber__minus__helper$0 = undefined;var $targ$2 = undefined;var $targ$3 = undefined;var $targ$4 = undefined;var $targ$5 = undefined;util$0 = require("./util");identify$0 = getProperty(util$0, "identify", "util");fork__minus__identify$0 = getProperty(util$0, "forkIdentify", "util");tuck$0 = getProperty(util$0, "tuck", "util");next__minus__id$0 = getProperty(util$0, "nextId", "util");ID$0 = getProperty(util$0, "ID", "util");methods$0 = getProperty(util$0, "methods", "util");longest__minus__run$0 = getProperty(util$0, "longestRun", "util");proxy$0 = require("./proxy");deprox$0 = getProperty(proxy$0, "deprox", "proxy");$targ$0 = function (dir$0) {
  var t0$0 = undefined;var m$0 = undefined;var rval$0 = undefined;var $targ$6 = undefined;var __at___$0 = undefined;var self$0 = undefined;$targ$6 = this;t0$0 = $targ$6;__at___$0 = t0$0;self$0 = t0$0;[__at___$0, self$0];rval$0 = Object.create(Object.getPrototypeOf(__at___$0));m$0 = null;$0: for (var _iterator = items(__at___$0)[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {
    m$0 = _step.value;
    var $targ$7 = undefined;var key$0 = undefined;var value$0 = undefined;var t0$1 = undefined;var t1$0 = undefined;t0$1 = m$0;if (Array.isArray(t0$1) && (t1$0 = t0$1.length, t1$0 === 2)) {
      key$0 = t0$1[0];value$0 = t0$1[1];$targ$7 = send(__at___$0, key$0);rval$0[key$0] = $targ$7;void 0;
    } else {
      ___match_error(m$0);
    }
  }return rval$0;
};Object.prototype[methods$0.fork] = $targ$0;$targ$1 = function () {
  var m$3 = undefined;var acc$0 = undefined;var temp$0 = undefined;var xs$0$0 = undefined;var t0$3 = undefined;var m$2$0 = undefined;var obj$0 = undefined;var p$0 = undefined;var dir$1 = undefined;var wrapper$0 = undefined;var t0$2 = undefined;var m$1$0 = undefined;m$1$0 = arguments;t0$2 = m$1$0.length;if (t0$2 >= 2 && t0$2 <= 3) {
    p$0 = m$1$0[0];dir$1 = m$1$0[1];if (2 >= t0$2) {
      wrapper$0 = this;
    } else {
      wrapper$0 = m$1$0[2];
    }obj$0 = this;identify$0(wrapper$0);m$2$0 = p$0.getFor(wrapper$0);if (m$2$0 === void 0) {
      undefined;
    } else {
      t0$3 = getProjector(items)(m$2$0);if (t0$3[0]) {
        xs$0$0 = t0$3[1];acc$0 = [];temp$0 = null;m$3 = null;$1: for (var _iterator = xs$0$0[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {
          m$3 = _step.value;
          var $targ$8 = undefined;var value$1 = undefined;var $$4300$0 = undefined;var $$4301$0 = undefined;var $$4302$0 = undefined;var t0$5 = undefined;var t1$2 = undefined;var t2$0 = undefined;var field$0 = undefined;var ph$0$0 = undefined;var t0$4 = undefined;var t1$1 = undefined;t0$4 = m$3;if (Array.isArray(t0$4) && (t1$1 = t0$4.length, t1$1 === 2)) {
            field$0 = t0$4[0];ph$0$0 = t0$4[1];t0$5 = ph$0$0;if (($$4301$0 = Array.isArray(t0$5)) && (t1$2 = t0$5.length, t1$2 === 2 && (t0$5[0] === "update" && (t2$0 = getProjector(deprox$0)(t0$5[1]), t2$0[0])))) {
              value$1 = t2$0[1];$targ$8 = dir$1.replace(send(obj$0, field$0), value$1);obj$0[field$0] = $targ$8;temp$0 = void 0;
            } else {
              if ($$4301$0 && (t1$2 === 1 && t0$5[0] === "delete")) {
                dir$1.exit(send(obj$0, field$0));delete obj$0[field$0];
              } else {
                temp$0 = ___match_error(ph$0$0);
              }
            }acc$0.push(temp$0);
          } else {
            ___match_error(m$3);
          }
        }acc$0;
      } else {
        ___match_error(m$2$0, "items! [each {field, match}]");
      }
    }return obj$0;
  } else {
    return ___match_error(m$1$0, "{p, dir, wrapper = this}");
  }
};Object.prototype[methods$0.patch] = $targ$1;object__minus__clobber__minus__helper$0 = function objectClobberHelper(obj$1, new__minus__obj$0, items$0, owns$0) {
  var m$4 = undefined;var m$5 = undefined;var operations$0 = undefined;operations$0 = [];m$4 = null;$2: for (var _iterator = items$0(obj$1)[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {
    m$4 = _step.value;
    var k$0 = undefined;var v$0 = undefined;var t0$6 = undefined;var t1$3 = undefined;t0$6 = m$4;if (Array.isArray(t0$6) && (t1$3 = t0$6.length, t1$3 === 2 && (k$0 = t0$6[0], v$0 = t0$6[1], !owns$0(new__minus__obj$0, k$0)))) {
      operations$0.push(["delete", k$0]);
    } else {
      false;
    }
  }m$5 = null;$3: for (var _iterator2 = items$0(new__minus__obj$0)[Symbol.iterator](), _step2; !(_step2 = _iterator2.next()).done;) {
    m$5 = _step2.value;
    var v0$0 = undefined;var bridge$$4385$0 = undefined;var k$1 = undefined;var v$1 = undefined;var ph$1$0 = undefined;var t0$7 = undefined;var t1$4 = undefined;var t2$1 = undefined;t0$7 = m$5;if (Array.isArray(t0$7) && (t1$4 = t0$7.length, t1$4 === 2)) {
      k$1 = t0$7[0];t2$1 = t0$7[1];v$1 = t2$1;ph$1$0 = t2$1;v0$0 = send(obj$1, k$1);bridge$$4385$0 = ph$1$0;if (bridge$$4385$0 === v0$0 || v0$0 && send(v0$0, ID$0) && v$1 && equal(send(v$1, ID$0), send(v0$0, ID$0))) {
        undefined;
      } else {
        operations$0.push(["put", k$1, v$1]);
      }
    } else {
      ___match_error(m$5);
    }
  }return operations$0;
};$targ$2 = function (new__minus__obj$1, dir$2) {
  var m$6 = undefined;var obj$2 = undefined;obj$2 = this;if (Object.getPrototypeOf(obj$2) !== Object.getPrototypeOf(new__minus__obj$1)) {
    return dir$2.replace(obj$2, new__minus__obj$1, false);
  }dir$2.unlist(obj$2);m$6 = null;$4: for (var _iterator = object__minus__clobber__minus__helper$0(obj$2, new__minus__obj$1, items, function (a$0, b$0) {
    return Object.hasOwnProperty.call(a$0, b$0);
  })[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {
    m$6 = _step.value;
    var $targ$9 = undefined;var k$3 = undefined;var v$2 = undefined;var k$2 = undefined;var $$4462$0 = undefined;var $$4463$0 = undefined;var $$4464$0 = undefined;var t0$8 = undefined;var t1$5 = undefined;t0$8 = m$6;if (($$4463$0 = Array.isArray(t0$8)) && (t1$5 = t0$8.length, t1$5 === 2 && t0$8[0] === "delete")) {
      k$2 = t0$8[1];dir$2.exit(send(obj$2, k$2));delete obj$2[k$2];
    } else {
      if ($$4463$0 && (t1$5 === 3 && t0$8[0] === "put")) {
        k$3 = t0$8[1];v$2 = t0$8[2];$targ$9 = dir$2.clobber(send(obj$2, k$3), v$2);obj$2[k$3] = $targ$9;void 0;
      } else {
        ___match_error(m$6);
      }
    }
  }tuck$0(obj$2, ID$0, send(new__minus__obj$1, ID$0));dir$2.list(obj$2);return obj$2;
};Object.prototype[methods$0.clobber] = $targ$2;$targ$3 = function (k$4, value$2) {
  var $targ$10 = undefined;$targ$10 = value$2;this[k$4] = $targ$10;return void 0;
};Object.prototype[methods$0.set] = $targ$3;$targ$4 = function () {
  var m$8 = undefined;var acc$1 = undefined;var temp$1 = undefined;var obj$3 = undefined;var id$0 = undefined;var wrapper$1 = undefined;var t0$9 = undefined;var m$7$0 = undefined;m$7$0 = arguments;t0$9 = m$7$0.length;if (t0$9 >= 0 && t0$9 <= 1) {
    if (0 >= t0$9) {
      wrapper$1 = this;
    } else {
      wrapper$1 = m$7$0[0];
    }obj$3 = this;id$0 = send(wrapper$1, ID$0);acc$1 = [];temp$1 = null;m$8 = null;$5: for (var _iterator = items(obj$3)[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {
      (function () {
        m$8 = _step.value;
        var setter$0 = undefined;var k$5 = undefined;var v$3 = undefined;var t0$10 = undefined;var t1$6 = undefined;t0$10 = m$8;if (Array.isArray(t0$10) && (t1$6 = t0$10.length, t1$6 === 2)) {
          k$5 = t0$10[0];v$3 = t0$10[1];setter$0 = function setter(new__minus__v$0) {
            var $targ$11 = undefined;$targ$11 = new__minus__v$0;obj$3[k$5] = $targ$11;return void 0;
          };temp$1 = [k$5, v$3, setter$0];acc$1.push(temp$1);
        } else {
          ___match_error(m$8);
        }
      })();
    }return acc$1;
  } else {
    return ___match_error(m$7$0, "{wrapper = this}");
  }
};Object.prototype[methods$0.iterateProperties] = $targ$4;$targ$5 = regeneratorRuntime.mark(function callee$0$0(reads$0, writes$0) {
  var m$9, acc$2, temp$2, _iterator, _step, tmp$0, name$0, r$0, t0$11, t1$7;

  return regeneratorRuntime.wrap(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        m$9 = undefined;
        acc$2 = undefined;
        temp$2 = undefined;
        acc$2 = [];temp$2 = null;m$9 = null;_iterator = items(writes$0 || {})[Symbol.iterator]();

      case 7:
        if ((_step = _iterator.next()).done) {
          context$1$0.next = 25;
          break;
        }

        m$9 = _step.value;
        tmp$0 = undefined;
        name$0 = undefined;
        r$0 = undefined;
        t0$11 = undefined;
        t1$7 = undefined;
        t0$11 = m$9;
        if (!(Array.isArray(t0$11) && (t1$7 = t0$11.length, t1$7 === 2 && (name$0 = t0$11[0], t0$11[1], r$0 = send(reads$0, name$0), tmp$0 = r$0, tmp$0 === undefined || tmp$0 === null ? tmp$0 : tmp$0.notEmpty())))) {
          context$1$0.next = 22;
          break;
        }

        context$1$0.next = 18;
        return r$0;

      case 18:
        temp$2 = context$1$0.sent;
        acc$2.push(temp$2);context$1$0.next = 23;
        break;

      case 22:
        false;

      case 23:
        context$1$0.next = 7;
        break;

      case 25:
        return context$1$0.abrupt("return", acc$2);

      case 26:
      case "end":
        return context$1$0.stop();
    }
  }, callee$0$0, this);
});Object.prototype[methods$0.relevantChanges] = $targ$5;$targ$12 = object__minus__clobber__minus__helper$0;exports.objectClobberHelper = $targ$12;void 0;
//# sourceMappingURL=object-fill.js.map

